# Production Fixes - February 1, 2026 10:00 AM

## Summary
Fixed two critical production issues:
1. ‚úÖ **404 error on page refresh** (SPA routing issue)
2. ‚úÖ **Emails not sending** when creating sessions/adding players (SMTP port issue)

## Issues Fixed

### 1. ‚ùå 404 Error on Page Refresh (FIXED ‚úÖ)
**Problem:** Refreshing any non-root page (e.g., `/sessions`) returned a 404 error from Vercel  
**Cause:** Missing Vercel SPA routing configuration  
**Fix:** Added `vercel.json` to frontend with proper rewrites:
```json
{
  "rewrites": [{ "source": "/(.*)", "destination": "/" }]
}
```
**Commits:** 
- 8c419ff: Add vercel.json for SPA routing (in frontend/)
- c9d58c6: Move vercel.json to root for proper deployment
- d1eaae4: Update vercel.json with proper build config and SPA routing

**Final Config:** (root-level vercel.json)
```json
{
  "buildCommand": "cd frontend && npm run build",
  "outputDirectory": "frontend/dist",
  "rewrites": [{ "source": "/(.*)", "destination": "/" }]
}
```

**Status:** Deployed to GitHub, Vercel auto-deploying (wait 2-3 minutes)

---

### 2. üìß Emails Not Sending on Session Creation (FIXED ‚úÖ)
**Problem:** Test email worked, but session invite emails weren't being sent  
**Cause:** Railway environment variable `EMAIL_PORT` was still set to `587` instead of `465` (SSL)  
**Fix:** Updated Railway environment variable:
```bash
railway variables --set EMAIL_PORT=465
```
**Status:** Variable updated and backend redeployed  
**Expected:** Emails should now send when you:
- Create a new session with players
- Add a player to an existing session
- Send reminder emails

---

## How to Test

### Test 404 Fix:
1. Visit https://pokernight.famylin.com/sessions
2. Refresh the page (Cmd+R)
3. Should load the sessions page instead of 404 error

### Test Email Fix:
1. Create a new poker session at https://pokernight.famylin.com
2. Add your email as a player
3. Check your inbox for the invite email
4. Should receive: "You're invited to Poker Night!"

---

## Technical Details

### Frontend (Vercel)
- Repository: https://github.com/idlewinn/poker-night-app
- Service: Vercel auto-deploy from `main` branch
- Config: `frontend/vercel.json` (newly added)

### Backend (Railway)
- Project: triumphant-integrity
- Service URL: https://poker-night-app-production-985f.up.railway.app
- Email Config:
  - `EMAIL_HOST`: smtp.gmail.com
  - `EMAIL_PORT`: 465 (updated from 587)
  - `EMAIL_USER`: edwinlin1987@gmail.com
  - `EMAIL_FROM`: edwinlin1987@gmail.com

---

## Next Steps

Both fixes are deployed. Give it 2-3 minutes for:
1. Vercel to finish deploying the SPA routing fix
2. Railway to finish restarting with the new EMAIL_PORT

Then test both features and confirm they're working!
